(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63643a08"],{"340a":function(e,t,r){},"9bcb":function(e,t,r){"use strict";r("340a")},a29d:function(e,t,r){},dc3f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("common-layout",[a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{alt:"logo",src:r("cf05")}}),a("span",{staticClass:"title"},[e._v("毕方部署平台")])]),a("div",{staticClass:"desc"},[e._v("BiFang 是最具影响力的服务部署平台")])]),a("div",{staticClass:"login"},[a("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",activeKey:e.activeKey,tabBarStyle:{textAlign:"center"}},on:{change:e.onTabChange}},[a("a-tab-pane",{key:"1",attrs:{tab:"登录"}},[a("a-form",{attrs:{form:e.loginForm},on:{submit:e.onLogin}},[a("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"admin"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"password",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("div",[a("a-checkbox",{attrs:{checked:!0}},[e._v("自动登录")]),a("a",{staticStyle:{float:"right"}},[e._v("忘记密码")])],1),a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"}},[e._v("登录")])],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"注册"}},[a("a-form",{attrs:{form:e.registerForm},on:{submit:e.onRegister}},[a("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.regError,expression:"regError"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.regError,showIcon:""}}),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['username', {rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入用户名"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请输入确认密码!"},{validator:e.compareToPassword}]}],expression:"['confirmPassword', { rules: [{ required: true, message: '请输入确认密码!'}, { validator: compareToPassword}] }]"}],attrs:{size:"large",placeholder:"请输入确认密码",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:"输入的邮箱地址不正确！"},{required:!0,message:"请输入邮箱"}]}],expression:"['email',{rules: [{ type: 'email',message: '输入的邮箱地址不正确！'},{ required: true,message: '请输入邮箱'}]}]"}],attrs:{size:"large",placeholder:"请输入邮箱",type:"email"}},[a("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.registing,size:"large",htmlType:"submit",type:"primary"}},[e._v("注册")])],1)],1)],1)],1),a("div")],1)])},s=[],o=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"common-layout"},[r("div",{staticClass:"content"},[e._t("default")],2),r("page-footer")],1)},l=[],n=r("2c4b"),m={name:"CommonLayout",components:{PageFooter:n["a"]}},c=m,u=(r("f594"),r("2877")),p=Object(u["a"])(c,i,l,!1,null,"afd61bdc",null),d=p.exports,g=r("8e44"),f=r("b775"),h=r("2f62"),v={name:"Login",components:{CommonLayout:d},data:function(){return{logging:!1,registing:!1,error:"",regError:"",activeKey:"1",loginForm:this.$form.createForm(this),registerForm:this.$form.createForm(this)}},methods:Object(o["a"])(Object(o["a"])({},Object(h["c"])(["setUser","setPermissions","setRoles"])),{},{onLogin:function(e){var t=this;e.preventDefault(),this.loginForm.validateFields((function(e){if(!e){t.logging=!0;var r=t.loginForm.getFieldValue("name"),a=t.loginForm.getFieldValue("password");g["a"].Login({username:r,password:a}).then(t.afterLogin)}}))},onRegister:function(e){var t=this;e.preventDefault(),this.registerForm.validateFields((function(e){if(!e){t.registing=!0;var r=t.registerForm.getFieldValue("username"),a=t.registerForm.getFieldValue("password"),s=t.registerForm.getFieldValue("confirmPassword"),o=t.registerForm.getFieldValue("email");g["a"].Register({username:r,password:a,passwordConfirm:s,email:o}).then(t.afterRegister)}}))},compareToPassword:function(e,t,r){var a=this.registerForm;t&&t!==a.getFieldValue("password")?r("两次输入的密码不同"):r()},onTabChange:function(e){this.activeKey=e},afterLogin:function(e){this.logging=!1;var t=e.data;if(0==t.code){var r=t.data,a=r.user,s=r.permissions,o=r.roles;this.setUser(a),this.setPermissions(s),this.setRoles(o),Object(f["g"])({token:t.data.token,expireAt:new Date(t.data.expireAt)}),this.$router.push("/release/releaseList")}else this.error=t.data.message},afterRegister:function(e){var t=e.data;if(this.registing=!1,0==t.code){this.$message.success("恭喜，注册成功！",3);var r=this.registerForm.getFieldValue("username"),a=this.registerForm.getFieldValue("password");this.registerForm.resetFields(),this.loginForm.setFieldsValue({name:r,password:a}),this.activeKey="1"}else this.regError=t.data}})},w=v,y=(r("9bcb"),Object(u["a"])(w,a,s,!1,null,"4d80ffa7",null));t["default"]=y.exports},f594:function(e,t,r){"use strict";r("a29d")}}]);