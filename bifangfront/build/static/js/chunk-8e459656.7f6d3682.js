(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e459656"],{"14e4":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[e("head-info",{attrs:{title:"项目数量",content:t.allCount.projectCount+"个",bordered:!0}}),e("head-info",{attrs:{title:"应用数量",content:t.allCount.appCount+"个",bordered:!0}}),e("head-info",{attrs:{title:"发布单数量",content:t.allCount.releaseCount+"个"}})],1)]),e("a-row",{staticStyle:{"margin-top":"20px"}},[e("a-col",{staticStyle:{"padding-right":"2px"},attrs:{xl:16,lg:24,md:24,sm:24,xs:24}},[e("a-card",{attrs:{title:"全景图",bordered:!1}},[e("my-echarts")],1),e("a-card",{staticClass:"project-list",staticStyle:{margin:"12px 0"},attrs:{bordered:!1,title:"项目","body-style":{padding:0}}},[e("a",{attrs:{slot:"extra",href:"#/application/project"},slot:"extra"},[t._v("全部项目")]),e("div",t._l(t.projectData,(function(a,r){return e("a-card-grid",{key:r},[e("a-card",{attrs:{bordered:!1,"body-style":{padding:0}}},[e("a-card-meta",{attrs:{description:a.description}},[e("div",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[e("a-avatar",{attrs:{size:"small",src:a.logo}}),e("span",[t._v(t._s(a.cn_name))])],1)]),e("div",{staticClass:"project-item"},[e("a",{staticClass:"group",attrs:{href:"/#/"}},[t._v(t._s(a.create_user_name))]),e("span",{staticClass:"datetime"},[t._v(t._s(a.time))])])],1)],1)})),1)])],1),e("a-col",{staticStyle:{"padding-left":"12px"},attrs:{xl:8,lg:24,md:24,sm:24,xs:24}},[e("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"快捷入口",bordered:!1,"body-style":{padding:0}}},[e("div",{staticClass:"item-group"},[e("a-tag",{attrs:{color:"red"}},[e("a",{attrs:{href:"#/release/releaseList"}},[t._v("发布单列表")])]),e("a-tag",{attrs:{color:"green"}},[e("a",{attrs:{href:"#/release/createRelease"}},[t._v("创建发布单")])]),e("a-tag",{attrs:{color:"blue"}},[e("a",{attrs:{href:"#/deployment/deploy"}},[t._v("服务部署")])]),e("br"),e("a-tag",{attrs:{color:"blue"}},[e("a",{attrs:{href:"#/application/app"}},[t._v("添加组件")])]),e("a-tag",{attrs:{color:"green"}},[e("a",{attrs:{href:"#/application/project"}},[t._v("添加项目")])])],1)]),e("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"运行动态",bordered:!1}},[e("div",{staticStyle:{"min-height":"400px"}},[e("a-list",t._l(t.releaseData,(function(a,r){return e("a-list-item",{key:r},[e("a-list-item-meta",[e("a-avatar",{attrs:{slot:"avatar",src:a.avatar},slot:"avatar"}),e("div",{attrs:{slot:"title"},domProps:{innerHTML:t._s(a.action)},slot:"title"}),e("div",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(a.time))])],1)],1)})),1)],1)])],1)],1)],1)},s=[],o=(e("99af"),e("4160"),e("b0c0"),e("159b"),e("5530")),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"head-info"},[e("span",[t._v(t._s(t.title))]),e("p",[t._v(t._s(t.content))])])},i=[],c={name:"HeadInfo",props:["title","content","bordered"]},l=c,d=(e("15a7"),e("2877")),p=Object(d["a"])(l,n,i,!1,null,"71f80992",null),u=p.exports,h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Echarts"},[e("a-card-grid",{staticStyle:{width:"50%",height:"250px",padding:"0"}},[e("div",{ref:"main",staticStyle:{width:"330px",height:"250px"}})]),e("a-card-grid",{staticStyle:{width:"50%",height:"250px",padding:"0"}},[e("div",{ref:"main1",staticStyle:{width:"330px",height:"250px"}})])],1)},f=[],m=e("ade3"),g=e("8e44"),b={title:{subtext:"发布单统计图",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"}},v={title:{left:"center",subtext:"发布单失败统计"},tooltip:{trigger:"item"},legend:Object(m["a"])({top:"5%",left:"center"},"top","bottom"),series:[{name:"发布单失败数量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1},labelLine:{show:!1},data:[]}]},y={name:"Echarts",created:function(){this.fetchReleaseTop5(),this.fetchReleaseFailedTop5()},methods:{releaseTop5Chart:function(t){var a=this.$echarts.init(this.$refs["main"]);Object.assign(b,t),a.setOption(b)},failedTop5Chart:function(){var t=this.$echarts.init(this.$refs["main1"]);t.setOption(v)},fetchReleaseTop5:function(){var t=this;g["a"].ReleaseTop5().then((function(a){var e=a.data;200==a.status&&0==e.code&&(console.log(e),t.releaseTop5Chart({yAxis:{type:"category",data:e.data.app_name.reverse()},series:[{name:"发布单量",type:"bar",label:{show:!0},emphasis:{focus:"series"},data:e.data.release_count.reverse()}]}))}))},fetchReleaseFailedTop5:function(){var t=this;g["a"].ReleaseFailedTop5().then((function(a){var e=a.data;if(200==a.status&&0==e.code){var r=[];e.data["app_name"].forEach((function(t,a){r.push({value:e.data["release_count"][a],name:String(t)})})),v.series[0].data=r,t.failedTop5Chart()}}))}}},_=y,x=Object(d["a"])(_,h,f,!1,null,null,null),j=x.exports,C=e("c1df"),w=e.n(C),T=["https://gw.alipayobjects.com/zos/rmsportal/WdGqmHpayyMjiEhcKoVE.png","https://gw.alipayobjects.com/zos/rmsportal/zOsKZmFRdUtvpqCImOVY.png","https://gw.alipayobjects.com/zos/rmsportal/dURIMkkrRFpPgTuzkwnB.png"],k=["https://gw.alipayobjects.com/zos/rmsportal/cnrhVkzwxjPwAaCfPbdc.png","https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png","https://gw.alipayobjects.com/zos/rmsportal/gaOngJwsRYRaVAuXXcmB.png","https://gw.alipayobjects.com/zos/rmsportal/WhxKECPNujWoWEFNdnJE.png","https://gw.alipayobjects.com/zos/rmsportal/ubnKSIfAJTxIgXOKlciN.png","https://gw.alipayobjects.com/zos/rmsportal/jZUIxmJycoymBprLOUbT.png"],R={name:"dashboard",components:{HeadInfo:u,MyEcharts:j},created:function(){this.fetchReleaseData(),this.fetchProjectData(),this.fetchAllCount()},data:function(){return{allCount:{},releaseData:[],projectData:[]}},methods:{fetchAllCount:function(){var t=this;g["a"].AllCount().then((function(a){var e=a.data;200==a.status&&0==e.code?(t.allCount.projectCount=e.data.project,t.allCount.appCount=e.data.app,t.allCount.releaseCount=e.data.release):t.allCount={}}))},fetchProjectData:function(){var t=this,a={currentPage:1,pageSize:6,sort:"-update_date"};g["a"].ProjectList(a).then((function(a){var e=a.data;200==a.status&&0==e.code?(t.projectTotal=e.data.count,e.data.results.forEach((function(a){t.projectData.push(Object(o["a"])(Object(o["a"])({},a),{},{logo:T[Math.floor(10*Math.random())%3],time:t.formatTime(a.update_date)}))}))):t.projectData=[]}))},fetchReleaseData:function(){var t=this,a={currentPage:1,pageSize:5,sort:"-update_date"};g["a"].ReleaseList(a).then((function(a){var e=a.data;200==a.status&&0==e.code?(t.releaseTotal=e.data.count,e.data.results.forEach((function(a){t.releaseData.push({avatar:k[Math.floor(10*Math.random())%4],user:a.create_user_name,name:a.name,action:t.actionTranformer(a.create_user_name,a.deploy_status_name,a.name),time:t.formatTime(a.update_date)})}))):t.releaseData=[]}))},formatTime:function(t){var a="",e=w()(),r=w()(t),s=w.a.duration(e-r,"ms"),o=s.get("days"),n=s.get("hours"),i=s.get("minutes");return a=o>0?o+"天之前":n>0?n+"小时之前":i+"分钟之前",a},actionTranformer:function(t,a,e){var r="",s='<a href="#/release/releaseList">'.concat(e,"</a>");switch(a.toLowerCase()){case"create":r="".concat(t," 新建发布单").concat(s);break;case"build":r="".concat(t," 构建发布单").concat(s);break;case"ready":r="".concat(t," 扭转发布单").concat(s);break;case"success":r="".concat(t," 部署发布单").concat(s,"成功");break;case"failed":r="".concat(t," 部署发布单").concat(s,"失败");break;case"ongoing":r="".concat(t," 发布单").concat(s,"部署中");break;default:r="".concat(t," 操作发布单").concat(s);break}return r}}},S=R,z=(e("79f8"),Object(d["a"])(S,r,s,!1,null,null,null));a["default"]=z.exports},"15a7":function(t,a,e){"use strict";e("2220")},2220:function(t,a,e){},"79f8":function(t,a,e){"use strict";e("8092")},8092:function(t,a,e){}}]);